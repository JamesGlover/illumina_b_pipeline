<!-- Start of first page -->
<div data-role="page" id="summary">

  <div data-role="header">
    <h1>Plate Summary: <%= @plate.barcode %></h1>
    <%= link_to "Search", search_path, :'data-direction' => "reverse", :'data-icon' => "search", :'data-theme' => "b"  %>
  </div><!-- /header -->

  <div data-role="content">
    <p><%= @plate.uuid %></p>
    
    <%= render :partial => "creation/plate",  %>
  </div><!-- /content -->


  <%= render :partial => 'plate_footer' %>
</div><!-- /page -->


<!-- Start of second page -->
<div data-role="page" id="state">

  <div data-role="header">
    <h1>Plate State</h1>
    <%= link_to "Search", search_path, :'data-direction' => "reverse", :'data-icon' => "search", :'data-theme' => "b"  %>
  </div><!-- /header -->

  <div data-role="content">
    <%= semantic_form_for(@plate, :url => plate_path(@plate.uuid), :html => {:method => :put}) do |f| %>
      <%= f.inputs :name => 'Set State' do %>
        <%= f.input :state, :label => 'Current State', :collection => @plate_states, :as => :select, :input_html => { :include_blank => false } %>
        <%= f.commit_button 'Change State' %>

      <% end %>
    <%- end %>

    <%# Move this to the new method of creation controller %>
    <%- if @plate.state == "passed" -%>
    <hr/>
      <%= form_tag new_plate_child_path(@plate.uuid), :method => 'get' do %>
        <p>
          <%= label_tag :plate_purpose_uuid, "Child Type" %>
          <%= select_tag :plate_purpose_uuid, 
            options_from_collection_for_select(@plate.plate_purpose.children, :uuid, :name)
          %>
        </p>
          <%= submit_tag "Next", :name => nil, :class => "submit" %>
      <% end %>

    <%- end -%>
    
  </div><!-- /content -->

  <%= render :partial => 'plate_footer' %>
</div><!-- /page -->


<!-- Start of second page -->
<div data-role="page" id="printing">

  <div data-role="header">
    <h1>Printing</h1>
    <%= link_to "Search", search_path, :'data-direction' => "reverse", :'data-icon' => "search", :'data-theme' => "b"  %>
  </div><!-- /header -->

  <div data-role="content">
    <%= link_to "Download Worksheet" %> - <%= button_to "Print Worksheet", {}, {:class => "submit"} %>

    <br/>
    <%= semantic_form_for(@barcode_label, :url => barcode_label_path(@barcode_label), :html => {:method => :put}) do |f| %>
      <%# There's a bug here somewhere in formtastic which means it's ignoring :input_options :(
          It looks like an previous bug so I really should open a ticket...
      %>
      <%= f.inputs do %>
        <%= f.input :printer, :label => 'Barcode Printer', :input_html => { :prompt => "Please select a printer..." }, :collection => @printers %>
        <%= f.commit_button 'Print Label' %>
      <% end %>
    <% end %>
  </div><!-- /content -->
  
  
  <%= render :partial => 'plate_footer' %>
</div><!-- /page -->
